<div
  class="fixed inset-0 bg-dark-bg/90 backdrop-blur-lg z-[100] flex flex-col items-center p-8 transition-opacity duration-300"
  [ngClass]="{
    'opacity-100 visible': uiService.isSearchOverlayOpen(),
    'opacity-0 invisible': !uiService.isSearchOverlayOpen()
  }">

  <button (click)="closeSearch()" class="absolute top-8 right-8 text-4xl text-text-secondary transition-transform hover:text-white hover:rotate-90">&times;</button>

  <div class="w-full max-w-2xl mt-24">
    <input
      type="text"
      placeholder="Busca tu prÃ³ximo gadget..."
      class="w-full bg-transparent border-b-2 border-primary-accent text-white text-center text-3xl md:text-5xl font-headings py-4 outline-none"
      [value]="productService.searchQuery()"
      (input)="onSearchInput($event)">

    @if (productService.searchQuery()) {
      <div class="mt-8 max-h-[60vh] overflow-y-auto pr-2">
        @for (product of productService.searchResults(); track product.id) {
          <a (click)="navigateToProduct(product.slug)"
             class="flex items-center gap-4 p-4 rounded-lg cursor-pointer transition-all duration-200 hover:bg-primary-accent/10 animate-fade-in-up">
            <img [src]="product.imageUrl" [alt]="product.name" class="w-16 h-16 object-contain bg-dark-bg-secondary rounded-md flex-shrink-0">
            <div class="flex-grow">
              <h4 class="font-semibold text-white leading-tight">{{ product.name }}</h4>
              <p class="text-sm text-text-secondary capitalize">{{ product.category }}</p>
            </div>
            <span class="font-bold text-lg text-primary-accent">${{ product.price.toFixed(2) }}</span>
          </a>
        } @empty {
          @if(productService.searchQuery().length > 1) {
            <p class="text-center text-text-secondary mt-8">
              No se encontraron resultados para "{{ productService.searchQuery() }}"
            </p>
          }
        }
      </div>
    }
  </div>
</div>
