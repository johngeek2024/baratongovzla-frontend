<a [routerLink]="['/product', product.slug]"
  class="product-card group relative flex rounded-2xl overflow-hidden text-text-primary no-underline transition-all duration-300 hover:-translate-y-2 bg-dark-bg-secondary"
  [ngClass]="{
    'flex-col': viewMode === 'grid',
    'flex-row items-center p-4': viewMode === 'list',
    'border border-border-color hover:border-primary-accent hover:shadow-neon-primary': !product.isDealOfTheDay,
    'border border-secondary-accent hover:shadow-neon-secondary': product.isDealOfTheDay
  }">

  @if(product.isDealOfTheDay) {
    <div class="absolute top-0 right-4 bg-gradient-to-r from-secondary-accent to-yellow-400 text-dark-bg px-4 py-2 rounded-b-lg text-xs font-bold shadow-lg z-10">
      <i class="fas fa-star"></i> El Baratongazo del DÃ­a
    </div>
  }

  <div class="bg-dark-bg flex items-center justify-center" [ngClass]="{
    'h-60 p-6': viewMode === 'grid',
    'h-36 w-36 p-4 flex-shrink-0 rounded-xl': viewMode === 'list'
  }">
    <img
      [ngSrc]="product.imageUrl"
      [alt]="product.name"
      width="400"
      height="267"
      class="w-full h-full object-contain"
    >
  </div>

  <div class="flex-grow" [ngClass]="{
    'p-6 flex flex-col': viewMode === 'grid',
    'pl-6 grid grid-cols-[1fr_auto] grid-rows-2 gap-x-6 w-full items-center': viewMode === 'list'
  }">

    <div [ngClass]="{'flex-grow': viewMode === 'grid', 'col-start-1': viewMode === 'list'}">
      <h3 class="font-semibold text-white transition-colors" [ngClass]="{'text-lg': viewMode === 'grid', 'text-xl': viewMode === 'list'}">
        {{ product.name }}
      </h3>
      @if(viewMode === 'list') {
        <p class="text-sm text-text-secondary mt-2 h-10 overflow-hidden">{{ product.description }}</p>
      }
    </div>

    @if(viewMode === 'list') {
      <div class="col-start-1 row-start-2 flex gap-8 mt-4 pt-4 border-t border-border-color">
        @for(spec of product.specs; track spec.name) {
          <div>
            <p class="font-semibold text-white">{{ spec.value || '' }}</p>
            <p class="text-xs text-text-secondary">{{ spec.name }}</p>
          </div>
        }
      </div>
    }

    <div [ngClass]="{
      'mt-4 flex justify-between items-center': viewMode === 'grid',
      'col-start-2 row-span-2 flex flex-col items-end justify-center': viewMode === 'list'
    }">
      <p class="font-bold text-secondary-accent" [ngClass]="{'text-xl': viewMode === 'grid', 'text-2xl mb-4': viewMode === 'list'}">
        ${{ product.price }}
        @if(product.oldPrice) {
          <span class="ml-2 text-base font-normal text-text-secondary line-through">${{ product.oldPrice }}</span>
        }
      </p>
      <button (click)="addToCart($event)" class="bg-primary-accent text-dark-bg font-bold rounded-lg transition-colors hover:bg-white" [ngClass]="{'px-3 py-2 text-sm': viewMode === 'grid', 'px-6 py-3': viewMode === 'list'}">
        <i class="fas fa-shopping-cart"></i>
      </button>
    </div>
  </div>
</a>
